# ThreadLocal（线程本地变量）简介

## 为什么使用ThreadLocal

在多线程编程中我们为了解决线程安全问题通常会利用`synchronized`或者J.U.C包中的`Lock`来控制线程对临界区资源的操作。
但是这种加锁方式会让未获取到锁的线程进入阻塞状态，很显然这种方式的时间效率并不是很高。说到底多线程的并发问题都是由于多个线程共享同一资源所导致，
那么解决并发问题的一个重要方法就是：**避免共享**。

避免共享的解决思路：
> 每个线程都拥有自己的"共享资源"，这样就可以避免共享资源的竞争。

正如**局部变量是线程安全的**，其本质上也是属于避免共享。那么在Java线程级别上，则是通过Java提供的线程本地变量（ThreadLocal）来解决的。
可以想象，每个线程拥有了自己的本地变量后，无疑会使内存变大，但是由于不需要同步也就减少了线程阻塞等待的情况，由此提高时间效率，所以这是一种"**以空间换时间**"的方案。


